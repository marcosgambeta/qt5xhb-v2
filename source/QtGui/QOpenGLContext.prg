//
// Qt5xHb - Bindings libraries for Harbour/xHarbour and Qt Framework 5
//
// Copyright (c) 2026 Marcos Antonio Gambeta <marcosgambeta@outlook.com>
//

// DO NOT EDIT THIS FILE - the content was created using a source code generator

// clang-format off

#include <hbclass.ch>

#ifndef QT5XHB_NO_REQUESTS
REQUEST QOpenGLContextGroup
REQUEST QOpenGLFunctions
REQUEST QScreen
REQUEST QSurface
REQUEST QSurfaceFormat
#endif

CLASS QOpenGLContext INHERIT QObject

   METHOD new
   METHOD delete
   METHOD create
   METHOD defaultFramebufferObject
   METHOD doneCurrent
   METHOD format
   METHOD functions
   METHOD hasExtension
   METHOD isValid
   METHOD makeCurrent
   METHOD screen
   METHOD setFormat
   METHOD setScreen
   METHOD setShareContext
   METHOD shareContext
   METHOD shareGroup
   METHOD surface
   METHOD swapBuffers
   METHOD areSharing
   METHOD currentContext

   METHOD onAboutToBeDestroyed

   DESTRUCTOR destroyObject

ENDCLASS

PROCEDURE destroyObject() CLASS QOpenGLContext
   IF ::self_destruction
      ::delete()
   ENDIF
RETURN

// clang-format on

#pragma BEGINDUMP

#include <QtCore/Qt>

#ifndef __XHARBOUR__
#include <QtGui/QOpenGLContext>
#endif

#include "qt5xhb_common.hpp"
#include "qt5xhb_macros.hpp"
#include "qt5xhb_utils.hpp"
#include "qt5xhb_events.hpp"
#include "qt5xhb_signals.hpp"

#ifdef __XHARBOUR__
#include <QtGui/QOpenGLContext>
#endif

#include <QtGui/QScreen>

#define GET_PTR_FROM_SELF(p) auto p = qobject_cast<QOpenGLContext *>(Qt5xHb::getQObjectPointerFromSelfItem())

// QOpenGLContext(QObject *parent = nullptr)
HB_FUNC_STATIC(QOPENGLCONTEXT_NEW)
{
  if (ISBETWEEN(0, 1) && ISQOBJECTORNIL(1)) {
    auto obj = new QOpenGLContext(OPQOBJECT(1, nullptr));
    Qt5xHb::returnNewObject(obj, false);
  } else {
    THROW_ERROR_3012();
  }
}

HB_FUNC_STATIC(QOPENGLCONTEXT_DELETE)
{
  GET_PTR_FROM_SELF(obj);
  DELETE_QOBJECT(obj);
  RETURN_SELF();
}

// bool create()
HB_FUNC_STATIC(QOPENGLCONTEXT_CREATE)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RBOOL(obj->create());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// GLuint defaultFramebufferObject() const
HB_FUNC_STATIC(QOPENGLCONTEXT_DEFAULTFRAMEBUFFEROBJECT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RGLUINT(obj->defaultFramebufferObject());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// void doneCurrent()
HB_FUNC_STATIC(QOPENGLCONTEXT_DONECURRENT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      obj->doneCurrent();
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }

  RETURN_SELF();
}

// QSurfaceFormat format() const
HB_FUNC_STATIC(QOPENGLCONTEXT_FORMAT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RQSURFACEFORMAT(obj->format());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// QOpenGLFunctions *functions() const
HB_FUNC_STATIC(QOPENGLCONTEXT_FUNCTIONS)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      auto ptr = obj->functions();
      Qt5xHb::createReturnClass(ptr, "QOPENGLFUNCTIONS", false);
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// bool hasExtension(const QByteArray &extension) const
HB_FUNC_STATIC(QOPENGLCONTEXT_HASEXTENSION)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQBYTEARRAY(1)) {
#endif
      RBOOL(obj->hasExtension(*PQBYTEARRAY(1)));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// bool isValid() const
HB_FUNC_STATIC(QOPENGLCONTEXT_ISVALID)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RBOOL(obj->isValid());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// bool makeCurrent(QSurface *surface)
HB_FUNC_STATIC(QOPENGLCONTEXT_MAKECURRENT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQSURFACE(1)) {
#endif
      RBOOL(obj->makeCurrent(PQSURFACE(1)));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// QScreen *screen() const
HB_FUNC_STATIC(QOPENGLCONTEXT_SCREEN)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      auto ptr = obj->screen();
      Qt5xHb::createReturnQObjectClass(ptr, "QSCREEN");
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// void setFormat(const QSurfaceFormat &format)
HB_FUNC_STATIC(QOPENGLCONTEXT_SETFORMAT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQSURFACEFORMAT(1)) {
#endif
      obj->setFormat(*PQSURFACEFORMAT(1));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }

  RETURN_SELF();
}

// void setScreen(QScreen *screen)
HB_FUNC_STATIC(QOPENGLCONTEXT_SETSCREEN)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQSCREEN(1)) {
#endif
      obj->setScreen(PQSCREEN(1));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }

  RETURN_SELF();
}

// void setShareContext(QOpenGLContext *shareContext)
HB_FUNC_STATIC(QOPENGLCONTEXT_SETSHARECONTEXT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQOPENGLCONTEXT(1)) {
#endif
      obj->setShareContext(PQOPENGLCONTEXT(1));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }

  RETURN_SELF();
}

// QOpenGLContext *shareContext() const
HB_FUNC_STATIC(QOPENGLCONTEXT_SHARECONTEXT)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      auto ptr = obj->shareContext();
      Qt5xHb::createReturnQObjectClass(ptr, "QOPENGLCONTEXT");
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// QOpenGLContextGroup *shareGroup() const
HB_FUNC_STATIC(QOPENGLCONTEXT_SHAREGROUP)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      auto ptr = obj->shareGroup();
      Qt5xHb::createReturnQObjectClass(ptr, "QOPENGLCONTEXTGROUP");
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// QSurface *surface() const
HB_FUNC_STATIC(QOPENGLCONTEXT_SURFACE)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      auto ptr = obj->surface();
      Qt5xHb::createReturnClass(ptr, "QSURFACE", false);
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// void swapBuffers(QSurface *surface)
HB_FUNC_STATIC(QOPENGLCONTEXT_SWAPBUFFERS)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQSURFACE(1)) {
#endif
      obj->swapBuffers(PQSURFACE(1));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }

  RETURN_SELF();
}

// static bool areSharing(QOpenGLContext *first, QOpenGLContext *second)
HB_FUNC_STATIC(QOPENGLCONTEXT_ARESHARING)
{
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
  if (ISNUMPAR(2) && ISQOPENGLCONTEXT(1) && ISQOPENGLCONTEXT(2)) {
#endif
    RBOOL(QOpenGLContext::areSharing(PQOPENGLCONTEXT(1), PQOPENGLCONTEXT(2)));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
  } else {
    THROW_ERROR_3012();
  }
#endif
}

// static QOpenGLContext *currentContext()
HB_FUNC_STATIC(QOPENGLCONTEXT_CURRENTCONTEXT)
{
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
  if (ISNUMPAR(0)) {
#endif
    auto ptr = QOpenGLContext::currentContext();
    Qt5xHb::createReturnQObjectClass(ptr, "QOPENGLCONTEXT");
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
  } else {
    THROW_ERROR_3012();
  }
#endif
}

// void aboutToBeDestroyed()
HB_FUNC_STATIC(QOPENGLCONTEXT_ONABOUTTOBEDESTROYED)
{
  GET_PTR_FROM_SELF(sender);

  auto result = false;

  if (sender != nullptr) {
    auto indexOfSignal = sender->metaObject()->indexOfSignal("aboutToBeDestroyed()");
    auto indexOfCodeBlock = -1;

    if (ISNUMPAR(1) && ISBLOCKORSYMBOL(1)) {
      if (Qt5xHb::Signals_connection(sender, indexOfSignal, indexOfCodeBlock)) {
        auto connection = QObject::connect(sender, &QOpenGLContext::aboutToBeDestroyed, [sender, indexOfCodeBlock]() {
          auto cb = Qt5xHb::Signals_return_codeblock(indexOfCodeBlock);

          if (cb != nullptr) {
            auto pSender = Qt5xHb::Signals_return_qobject(sender, "QOPENGLCONTEXT");
            hb_vmEvalBlockV(cb, 1, pSender);
            hb_itemRelease(pSender);
          }
        });
        Qt5xHb::Signals_store_connection(indexOfCodeBlock, connection);
        result = true;
      }
    } else if (ISNUMPAR(0)) {
      Qt5xHb::Signals_disconnection(sender, indexOfSignal);
      QObject::disconnect(Qt5xHb::Signals_get_connection(sender, indexOfSignal));
      result = true;
    } else {
      THROW_ERROR_3012();
    }
  }

  hb_retl(result);
}

#pragma ENDDUMP
