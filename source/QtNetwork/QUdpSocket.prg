//
// Qt5xHb - Bindings libraries for Harbour/xHarbour and Qt Framework 5
//
// Copyright (c) 2026 Marcos Antonio Gambeta <marcosgambeta@outlook.com>
//

// DO NOT EDIT THIS FILE - the content was created using a source code generator

// clang-format off

#include <hbclass.ch>

#ifndef QT5XHB_NO_REQUESTS
REQUEST QNetworkDatagram
REQUEST QNetworkInterface
#endif

CLASS QUdpSocket INHERIT QAbstractSocket

   METHOD new
   METHOD delete
   METHOD joinMulticastGroup
   METHOD leaveMulticastGroup
   METHOD multicastInterface
   METHOD setMulticastInterface
   METHOD hasPendingDatagrams
   METHOD pendingDatagramSize
   METHOD receiveDatagram
   METHOD writeDatagram

   DESTRUCTOR destroyObject

ENDCLASS

PROCEDURE destroyObject() CLASS QUdpSocket
   IF ::self_destruction
      ::delete()
   ENDIF
RETURN

// clang-format on

#pragma BEGINDUMP

#include <QtCore/Qt>

#ifndef __XHARBOUR__
#include <QtNetwork/QUdpSocket>
#endif

#include "qt5xhb_common.hpp"
#include "qt5xhb_macros.hpp"
#include "qt5xhb_utils.hpp"
#include "qt5xhb_events.hpp"
#include "qt5xhb_signals.hpp"

#ifdef __XHARBOUR__
#include <QtNetwork/QUdpSocket>
#endif

#if (QT_VERSION >= QT_VERSION_CHECK(5, 8, 0))
#include <QtNetwork/QNetworkDatagram>
#endif
#include <QtNetwork/QNetworkInterface>

#define GET_PTR_FROM_SELF(p) auto p = qobject_cast<QUdpSocket *>(Qt5xHb::getQObjectPointerFromSelfItem())

// QUdpSocket(QObject *parent = nullptr)
HB_FUNC_STATIC(QUDPSOCKET_NEW)
{
  if (ISBETWEEN(0, 1) && ISQOBJECTORNIL(1)) {
    auto obj = new QUdpSocket(OPQOBJECT(1, nullptr));
    Qt5xHb::returnNewObject(obj, false);
  } else {
    THROW_ERROR_3012();
  }
}

// virtual ~QUdpSocket()
HB_FUNC_STATIC(QUDPSOCKET_DELETE)
{
  GET_PTR_FROM_SELF(obj);
  DELETE_QOBJECT(obj);
  RETURN_SELF();
}

HB_FUNC_STATIC(QUDPSOCKET_JOINMULTICASTGROUP)
{
  if (ISNUMPAR(1) && ISQHOSTADDRESS(1)) {
    // bool joinMulticastGroup(const QHostAddress &groupAddress)
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RBOOL(obj->joinMulticastGroup(*PQHOSTADDRESS(1)));
    }
  } else if (ISNUMPAR(2) && ISQHOSTADDRESS(1) && ISQNETWORKINTERFACE(2)) {
    // bool joinMulticastGroup(const QHostAddress &groupAddress, const QNetworkInterface &iface)
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RBOOL(obj->joinMulticastGroup(*PQHOSTADDRESS(1), *PQNETWORKINTERFACE(2)));
    }
  } else {
    THROW_ERROR_3012();
  }
}

HB_FUNC_STATIC(QUDPSOCKET_LEAVEMULTICASTGROUP)
{
  if (ISNUMPAR(1) && ISQHOSTADDRESS(1)) {
    // bool leaveMulticastGroup(const QHostAddress &groupAddress)
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RBOOL(obj->leaveMulticastGroup(*PQHOSTADDRESS(1)));
    }
  } else if (ISNUMPAR(2) && ISQHOSTADDRESS(1) && ISQNETWORKINTERFACE(2)) {
    // bool leaveMulticastGroup(const QHostAddress &groupAddress, const QNetworkInterface &iface)
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RBOOL(obj->leaveMulticastGroup(*PQHOSTADDRESS(1), *PQNETWORKINTERFACE(2)));
    }
  } else {
    THROW_ERROR_3012();
  }
}

// QNetworkInterface multicastInterface() const
HB_FUNC_STATIC(QUDPSOCKET_MULTICASTINTERFACE)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RQNETWORKINTERFACE(obj->multicastInterface());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// void setMulticastInterface(const QNetworkInterface &iface)
HB_FUNC_STATIC(QUDPSOCKET_SETMULTICASTINTERFACE)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(1) && ISQNETWORKINTERFACE(1)) {
#endif
      obj->setMulticastInterface(*PQNETWORKINTERFACE(1));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }

  RETURN_SELF();
}

// bool hasPendingDatagrams() const
HB_FUNC_STATIC(QUDPSOCKET_HASPENDINGDATAGRAMS)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RBOOL(obj->hasPendingDatagrams());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// qint64 pendingDatagramSize() const
HB_FUNC_STATIC(QUDPSOCKET_PENDINGDATAGRAMSIZE)
{
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISNUMPAR(0)) {
#endif
      RQINT64(obj->pendingDatagramSize());
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
}

// QNetworkDatagram receiveDatagram(qint64 maxSize = -1)
HB_FUNC_STATIC(QUDPSOCKET_RECEIVEDATAGRAM)
{
#if (QT_VERSION >= QT_VERSION_CHECK(5, 8, 0))
  GET_PTR_FROM_SELF(obj);

  if (obj != nullptr) {
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    if (ISBETWEEN(0, 1) && ISNUMORNIL(1)) {
#endif
      RQNETWORKDATAGRAM(obj->receiveDatagram(OPQINT64(1, -1)));
#ifndef QT5XHB_DONT_CHECK_PARAMETERS
    } else {
      THROW_ERROR_3012();
    }
#endif
  }
#endif
}

// qint64 readDatagram(char *data, qint64 maxlen, QHostAddress *host = nullptr, quint16 *port = nullptr)

HB_FUNC_STATIC(QUDPSOCKET_WRITEDATAGRAM)
{
  if (ISNUMPAR(1) && ISQNETWORKDATAGRAM(1)) {
    // qint64 writeDatagram(const QNetworkDatagram &datagram)
#if (QT_VERSION >= QT_VERSION_CHECK(5, 8, 0))
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RQINT64(obj->writeDatagram(*PQNETWORKDATAGRAM(1)));
    }
#endif
  } else if (ISNUMPAR(4) && HB_ISCHAR(1) && HB_ISNUM(2) && ISQHOSTADDRESS(3) && HB_ISNUM(4)) {
    // qint64 writeDatagram(const char *data, qint64 len, const QHostAddress &host, quint16 port)
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RQINT64(obj->writeDatagram(PCONSTCHAR(1), PQINT64(2), *PQHOSTADDRESS(3), PQUINT16(4)));
    }
  } else if (ISNUMPAR(3) && ISQBYTEARRAY(1) && ISQHOSTADDRESS(2) && HB_ISNUM(3)) {
    // qint64 writeDatagram(const QByteArray &datagram, const QHostAddress &host, quint16 port)
    GET_PTR_FROM_SELF(obj);

    if (obj != nullptr) {
      RQINT64(obj->writeDatagram(*PQBYTEARRAY(1), *PQHOSTADDRESS(2), PQUINT16(3)));
    }
  } else {
    THROW_ERROR_3012();
  }
}

#pragma ENDDUMP
